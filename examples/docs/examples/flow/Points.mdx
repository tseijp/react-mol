---
sidebar_position: 4
sidebar_label: Points
---

import {Demo} from '../../components/Demo'
import {Instanced, Flow} from 'react-mol/src'
import niceColors from 'nice-color-palettes'
import {useFrame} from '@react-three/fiber'
import {range} from '../../utils'

<Demo noInline {...{Instanced, Flow, niceColors, useFrame, range}}
  c={50}
  colors={range(50**2).map(() =>
    niceColors[17][Math.random()*5<<0]
  )}
>
{`render (
  <Canvas>
    <Instanced position={[-c/4,-1,-c/4]} count={2500}>
      <sphereGeometry attach="geometry" args={[1,32,32]}/>
      <meshPhongMaterial  attach="material" />
      {range(c**2).map(i =>
        <Flow
          key={i}
          color={colors[i]}
          args={(t,x,_,z) => [
            Math.sin((x+t)/3)
           +Math.sin((z+t)/2)
          ]}
          position={r => [i%c,r,i/c%c]}
          scale={r => [r/3,r/3,r/3]} />
      )}
    </Instanced>
  </Canvas>
)`}
</Demo>
