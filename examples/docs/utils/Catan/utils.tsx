const {cos, sin, sqrt, PI} = Math

const floorVec = (r= 5*sqrt(3), a=0) => [
    {i: r*cos(a), j: r*cos(a-PI*2/3), k: r*cos(a+PI*2/3)},
    {i: r*sin(a), j: r*sin(a-PI*2/3), k: r*sin(a+PI*2/3)}
]
floorVec.roadVec = floorVec(5 * sqrt(3))
floorVec.roadRot = ([i=0, j=0, k=0]=[]) => [PI/2, PI/2 + [PI/3, 0, -PI/3][[i%2-j%2, j%2-k%2, k%2-i%2].indexOf(0)], 0]
floorVec.roadPos = ([i=0, j=0, k=0]=[]) => {
    const [x, z] = floorVec.roadVec
    return [x.i*i+x.j*j+x.k*k, 2, z.i*i+z.j*j+z.k*k]
}
floorVec.settleVec = floorVec(10, PI/6)
floorVec.settlePos = ([i=0, j=0, k=0]=[]) => {
    const [x, z] = floorVec.settleVec
    return [x.i*i+x.j*j+x.k*k, 2, z.i*i+z.j*j+z.k*k]
}
floorVec.terrainVec = floorVec(10 * sqrt(3))
floorVec.terrainPos = ([i=0, j=0, k=0]=[]) => {
    const [x, z] = floorVec.terrainVec
    return [x.i*i+x.j*j+x.k*k, 0, z.i*i+z.j*j+z.k*k]
}

export {floorVec}

export const hoverCursor = (key='', colors: any={}) => `url('data:image/svg+xml;base64,${btoa(key? `
<svg width="64" height="64" fill="none" xmlns="http://www.w3.org/2000/svg">
  <g clip-path="url(#clip0)">
    <path d="M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z" stroke="#000"/>
    <g filter="url(#filter0_d)">
      <path d="M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z" fill="${colors[key] || '#fff'}"/>
    </g>
    <path d="M2 2l11 2.947L4.947 13 2 2z" fill="#000"/>
    <text fill="#000" style="white-space:pre" font-family="Inter var, sans-serif" font-size="10" letter-spacing="-.01em">
      <tspan x="35" y="63">${key}</tspan>
    </text>
  </g>
  <defs>
    <clipPath id="clip0">
      <path fill="#fff" d="M0 0h64v64H0z"/>
    </clipPath>
    <filter id="filter0_d" x="6" y="8" width="47" height="47" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
      <feFlood flood-opacity="0" result="BackgroundImageFix"/>
      <feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/>
      <feOffset dy="2"/>
      <feGaussianBlur stdDeviation="3"/>
      <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"/>
      <feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/>
      <feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/>
    </filter>
  </defs>
</svg>`.trim(): `
<svg width="64" height="64" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z" stroke="#000"/>
  <path d="M2 2l11 2.947L4.947 13 2 2z" fill="#000"/>
</svg>`.trim())
}'), auto`

const mountains = (props: any) => <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 329.999 329.999" enableBackground="new 0 0 329.999 329.999"{...props}><g id="XMLID_340_"><path id="XMLID_341_" d="M237.055,265H315c5.437,0,10.451-2.944,13.1-7.694c2.649-4.75,2.52-10.562-0.338-15.188l-105-170C220.029,67.693,215.199,65,210,65c-5.201,0-10.029,2.693-12.763,7.118l-39.513,63.974l75.26,122.297L237.055,265z"/><path id="XMLID_348_" d="M15,265h160c0.006,0,0.014,0,0.019,0h26.809l-94.263-153.178C104.804,107.577,100.082,105,95,105c-5.209,0-10.045,2.702-12.775,7.139l-80,130c-2.848,4.628-2.97,10.435-0.318,15.178C4.557,262.061,9.566,265,15,265z"/></g></svg>

const forest = (props: any) => <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 296.867 296.867" enableBackground="new 0 0 296.867 296.867;" {...props}><path d="M294.053,215.719l-20.999-20.997c3.589,1.764,8.044,1.16,11.027-1.82c3.751-3.754,3.751-9.838,0-13.586l-22.16-22.157c3.761,2.778,9.082,2.475,12.488-0.93c3.75-3.751,3.75-9.833,0-13.583l-21.844-21.844c3.724,2.445,8.776,2.031,12.051-1.245c3.749-3.75,3.749-9.83,0-13.581L244.58,85.939c3.513,1.526,7.748,0.862,10.618-2.012c3.751-3.751,3.751-9.833,0-13.58l-14.311-14.311c-0.012-0.016-0.029-0.027-0.045-0.041c-0.018-0.021-0.033-0.039-0.051-0.058c-3.752-3.748-9.828-3.748-13.584,0l-14.406,14.409c-3.749,3.745-3.749,9.829,0,13.582c2.872,2.872,7.11,3.537,10.62,2.01l-20.036,20.037c-3.749,3.751-3.749,9.831,0,13.581c3.277,3.276,8.327,3.69,12.053,1.245l-21.844,21.844c-2.561,2.559-3.371,6.202-2.438,9.45l-15.022-15.019c3.763,2.775,9.082,2.475,12.489-0.93c3.749-3.753,3.749-9.836,0-13.584l-21.847-21.844c3.725,2.443,8.778,2.031,12.053-1.244c3.749-3.751,3.749-9.833,0-13.581l-20.036-20.038c3.512,1.524,7.748,0.862,10.618-2.011c3.749-3.751,3.749-9.83,0-13.585l-14.311-14.306c-0.012-0.017-0.028-0.028-0.042-0.042c-0.018-0.02-0.033-0.041-0.053-0.056c-3.751-3.752-9.828-3.752-13.582,0l-14.406,14.404c-3.749,3.754-3.749,9.833,0,13.584c2.87,2.873,7.106,3.536,10.616,2.012l-20.032,20.037c-3.751,3.748-3.751,9.83,0,13.581c3.272,3.275,8.323,3.688,12.052,1.244l-21.846,21.844c-3.753,3.748-3.753,9.831,0,13.584c3.405,3.404,8.727,3.705,12.485,0.93l-19.616,19.616l-19.028-19.029c3.724,2.445,8.778,2.031,12.051-1.245c3.753-3.751,3.753-9.831,0-13.582l-20.036-20.034c3.515,1.523,7.748,0.86,10.618-2.014c3.753-3.751,3.753-9.829,0-13.582L69.977,72.899c-0.018-0.015-0.033-0.028-0.047-0.042c-0.02-0.016-0.035-0.037-0.053-0.055c-3.751-3.752-9.83-3.752-13.584,0L41.887,87.21c-3.751,3.751-3.751,9.829,0,13.58c2.875,2.874,7.108,3.538,10.618,2.014l-20.036,20.034c-3.749,3.751-3.749,9.831,0,13.582c3.277,3.276,8.327,3.69,12.056,1.245L22.68,159.51c-3.752,3.748-3.752,9.828,0,13.581c3.405,3.405,8.724,3.708,12.482,0.93l-22.155,22.16c-3.754,3.749-3.754,9.828,0,13.582c2.981,2.984,7.441,3.584,11.028,1.821L4.121,231.497C1.632,233.231,0,236.338,0,239.6c0,5.305,4.298,9.833,9.606,9.833h0.214c0.006,0,0.008,0,0.012,0h43.27v4.781c0,5.309,4.193,9.608,9.496,9.608c5.306,0,9.504-4.3,9.504-9.608v-4.781h43.685c0.092,0,0.177-0.237,0.271-0.239c2.557,0.074,5.13-0.966,7.08-2.915c3.754-3.752,3.754-9.686,0-13.44l-20.549-20.405h35.514v41.781c0,5.309,4.196,9.608,9.499,9.608c5.306,0,9.501-4.3,9.501-9.608v-41.781h20.534l-2.599,2.398c-2.487,1.736-4.121,4.675-4.121,7.939c0,5.305,4.298,9.662,9.605,9.662h0.216c0.004,0,0.006,0,0.01,0h43.355v21.781c0,5.309,4.197,9.608,9.498,9.608c5.305,0,9.502-4.3,9.502-9.608v-21.781h43.6c0.094,0,0.177-0.171,0.271-0.173c2.555,0.079,5.132-0.929,7.082-2.876C297.805,225.632,297.805,219.47,294.053,215.719z"/>
</svg>

const desert = (props: any) => <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 516.375 516.375" enableBackground="new 0 0 516.375 516.375;" {...props}><g><g id="Layer_2_23_"><path d="M148.219,286.875h71.719v229.5H306V353.812h62.156c18.484,0,33.469-14.984,33.469-33.469V153c0-18.484-14.984-33.469-33.469-33.469S334.688,134.516,334.688,153v133.875H306V43.031C306,19.269,286.731,0,262.969,0s-43.031,19.269-43.031,43.031v176.906h-38.25V95.625c0-18.484-14.984-33.469-33.469-33.469S114.75,77.141,114.75,95.625v157.781C114.75,271.891,129.734,286.875,148.219,286.875z"/></g></g></svg>

const fields = (props: any) => <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 46.607 46.607" enableBackground="new 0 0 46.607 46.607;" {...props}><g><g><path d="M22.408,12.013c0.221,0.261,0.546,0.412,0.888,0.412c0.343,0,0.668-0.149,0.89-0.411c0.994-1.175,2.469-3.333,2.469-5.802c0-2.467-1.474-4.624-2.468-5.8C23.965,0.151,23.641,0,23.298,0c-0.342,0-0.668,0.149-0.889,0.411c-0.995,1.175-2.468,3.333-2.469,5.801C19.941,8.68,21.413,10.838,22.408,12.013z"/><path d="M23.304,20.1c0.182,0.008,4.554,0.182,7.133-2.396c1.744-1.745,2.229-4.313,2.357-5.847c0.028-0.341-0.095-0.678-0.337-0.92c-0.242-0.242-0.579-0.365-0.921-0.336c-1.534,0.128-4.104,0.612-5.85,2.356c-1.926,1.928-2.314,4.86-2.384,6.293c-0.069-1.433-0.458-4.365-2.385-6.293c-1.746-1.745-4.314-2.229-5.849-2.356c-0.341-0.029-0.678,0.095-0.92,0.337c-0.242,0.243-0.364,0.579-0.336,0.92c0.128,1.534,0.612,4.102,2.356,5.846C18.75,20.282,23.121,20.108,23.304,20.1z"/><path d="M25.688,22.209c-1.926,1.928-2.314,4.859-2.384,6.293c-0.069-1.434-0.458-4.365-2.385-6.293c-1.746-1.745-4.314-2.229-5.849-2.356c-0.341-0.028-0.678,0.095-0.92,0.337c-0.242,0.242-0.364,0.579-0.336,0.92c0.128,1.534,0.612,4.103,2.356,5.846c2.579,2.579,6.949,2.404,7.133,2.396c0.182,0.009,4.554,0.184,7.133-2.396c1.745-1.745,2.229-4.313,2.357-5.848c0.028-0.341-0.095-0.678-0.337-0.919c-0.242-0.242-0.579-0.365-0.921-0.336C30.002,19.98,27.434,20.464,25.688,22.209z"/><path d="M25.688,31.463c-1.926,1.928-2.314,4.858-2.384,6.293c-0.069-1.435-0.458-4.365-2.385-6.293c-1.745-1.746-4.313-2.229-5.847-2.356c-0.342-0.028-0.678,0.095-0.92,0.336c-0.242,0.241-0.366,0.579-0.338,0.919c0.128,1.533,0.611,4.104,2.356,5.847c1.764,1.765,4.368,2.24,5.895,2.362v6.668c0,0.756,0.524,1.369,1.281,1.369c0.756,0,1.281-0.613,1.281-1.369v-6.675c1.537-0.132,4.076-0.622,5.809-2.354c1.744-1.744,2.229-4.312,2.357-5.847c0.028-0.341-0.095-0.679-0.337-0.92c-0.242-0.242-0.579-0.365-0.921-0.336C30.002,29.233,27.434,29.717,25.688,31.463z"/></g></g></svg>

const hills = (props: any) => <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 62.972 62.972" enableBackground="new 0 0 62.972 62.972" {...props}><path d="M28.634,22.313H12.526c-0.894,0-1.62-0.725-1.62-1.62v-9.522c0-0.894,0.725-1.62,1.62-1.62h16.108c0.894,0,1.62,0.725,1.62,1.62v9.522C30.253,21.588,29.528,22.313,28.634,22.313z M52.066,20.694v-9.522c0-0.894-0.725-1.62-1.619-1.62H34.339c-0.895,0-1.62,0.725-1.62,1.62v9.522c0,0.894,0.725,1.62,1.62,1.62h16.108C51.341,22.313,52.066,21.588,52.066,20.694z M19.347,36.247v-9.522c0-0.895-0.725-1.62-1.62-1.62H1.619C0.725,25.105,0,25.831,0,26.725v9.522c0,0.895,0.725,1.62,1.619,1.62h16.108C18.622,37.867,19.347,37.141,19.347,36.247zM41.16,36.247v-9.522c0-0.895-0.725-1.62-1.62-1.62H23.432c-0.894,0-1.619,0.725-1.619,1.62v9.522c0,0.895,0.725,1.62,1.619,1.62H39.54C40.434,37.867,41.16,37.141,41.16,36.247z M62.972,36.247v-9.522c0-0.895-0.725-1.62-1.619-1.62H45.245c-0.895,0-1.62,0.725-1.62,1.62v9.522c0,0.895,0.725,1.62,1.62,1.62h16.108C62.247,37.867,62.972,37.141,62.972,36.247zM30.253,51.8v-9.522c0-0.894-0.725-1.62-1.62-1.62H12.526c-0.894,0-1.62,0.725-1.62,1.62V51.8c0,0.894,0.725,1.619,1.62,1.619h16.108C29.528,53.42,30.253,52.695,30.253,51.8z M52.066,51.8v-9.522c0-0.894-0.725-1.62-1.619-1.62H34.339c-0.895,0-1.62,0.725-1.62,1.62V51.8c0,0.894,0.725,1.619,1.62,1.619h16.108C51.341,53.42,52.066,52.695,52.066,51.8z"/></svg>

const pasture = (props: any) => <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 459.953 459.953" enableBackground="new 0 0 459.953 459.953;" {...props}><g><g><path d="M312.329,258.729c0-17.858,11.371-32.751,18.28-40.154c-3.604-25.376,5.215-49.3,24.716-60.439c8.544-4.881,16.548-7.327,24.11-7.327c8.299,0,16.067,2.946,23.432,8.854c4.134-0.88,9.992-1.791,16.555-1.791c8.793,0,18.848,1.636,27.693,7.172c13.708,8.579,15.172,18.398,10.288,26.323c-2.964,4.808-9.059,9.441-15.561,9.441c-4.216,0-8.604-1.95-12.416-7.066c-0.778-1.044-1.545-2.049-2.308-3.031c-0.168,0.207-0.341,0.409-0.521,0.606c17.713,34.061,25.453,77.438-0.65,92.35c-7.245,4.141-15.233,6.1-23.43,6.1c-19.745,0-40.675-11.379-55.233-31.051c-0.451,0.061-0.918,0.098-1.393,0.121c5.743,15.083-7.565,22.59-16.802,22.59C319.834,281.427,312.329,274.992,312.329,258.729z"/><path d="M39.413,152.918c0.622-3.58,1.782-7.113,3.507-10.507c6.008-11.822,17.844-20.561,32.473-23.974l7.206-1.682l0.87-7.348c1.486-12.568,9.428-23.808,21.787-30.839c8.182-4.655,17.672-7.116,27.446-7.116c5.397,0,10.736,0.745,15.867,2.211l6.25,1.789l4.405-4.78c9.493-10.302,23.718-16.21,39.027-16.21c13.87,0,26.744,4.778,36.251,13.454l4.197,3.83l5.507-1.4c4.634-1.177,9.424-1.773,14.238-1.773c8.834,0,17.551,2.045,25.207,5.919c12.818,6.482,21.458,17.389,23.704,29.922l1.286,7.183l7.176,1.327c14.862,2.748,27.25,10.966,33.986,22.546c0.898,1.546,1.67,3.128,2.33,4.735c-1.802,0.869-3.61,1.813-5.423,2.847c-12.876,7.356-22.748,18.957-28.549,33.547c-4.403,11.08-6.29,23.492-5.559,36.299c-8.155,10.304-17.642,26.457-17.642,45.832c0,11.838,3.005,21.447,8.933,28.563c5.498,6.601,13.193,10.552,21.916,11.345c-5.946,4.826-13.14,8.271-20.997,10.103v81.749c0,8.285-6.715,15-15,15c-8.283,0-15-6.715-15-15v-62.969c-5.951,6.664-14.141,11.726-23.727,14.453c-5.097,1.45-10.373,2.188-15.682,2.188c-9.828,0-19.376-2.486-27.616-7.188l-5.533-3.158l-5.368,3.429c-8.567,5.47-19.125,8.481-29.728,8.481c-4.424,0-8.855-0.514-13.171-1.526c-14.585-3.423-26.394-12.187-32.396-24.044l-3.083-6.092l-0.847,0.041v76.387c0,8.283-6.716,15-15,15s-15-6.717-15-15v-80.135c-6.059-2.449-11.545-5.936-16.063-10.33c-9.649-9.389-13.895-21.827-11.649-34.129l1.416-7.76l-7.043-3.55c-12.863-6.481-21.536-17.37-23.797-29.87c-2.218-12.273,2.066-24.702,11.756-34.1l5.93-5.751l-4.165-7.133c-0.173-0.297-0.325-0.6-0.49-0.9c-12.512,14.102-25.896,39.979-39.241,23.021C-11.321,179.986,19.034,162.112,39.413,152.918z"/></g></g></svg>

export const icons = {mountains, forest, desert, fields, hills, pasture}
