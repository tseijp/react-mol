{"version":3,"sources":["docs/utils/serviceWorker.ts","docs/MolsHierarchy.tsx","docs/MolsRecursion.tsx","docs/Hels.tsx","docs/App.tsx","docs/index.tsx","src/calc/hel.ts","src/utils.ts","src/Atom.tsx","src/useMol.ts","src/Render.tsx","src/index.tsx","src/Poly.tsx","src/calc/mol.ts"],"names":["Boolean","window","location","hostname","match","H2O","CH4","CH3OH","angle","Math","PI","CH3COOH","double","Polyethylene","Poly","n","children","Polypropylene","i","Random","rand","mul","random","recursion","Array","fill","map","_","key","Test","Archimedes","Fermat","Power","Link","path","name","onClick","href","Button","loc","alt","src","br","INDEX","Object","keys","MOLSH","m","MOLSR","h","HELS","App","paths","pathname","split","filter","v","style","position","width","height","top","left","zIndex","gl","alpha","antialias","logarithmicDepthBuffer","camera","fov","intensity","color","attach","args","userSelect","fontSize","display","slice","charSet","content","rel","About","Basic","Root","entries","HIERARCHY","k","V","component","RECURSION","exact","to","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","calcHel","props","clone","React","Children","child","cloneElement","depth","base","THREE","axis","vec3","temp","euler","quat1","quat2","mergeVec3","rate","vec","j","r","reduce","a","b","scaleVec3","set","length","eulerVec3","setFromUnitVectors","setFromQuaternion","toArray","calcColor","_color","setColorName","calcMatrix","rotation","scale","updateMatrix","matrix","calcRelative","direction","normalize","setFromEuler","applyQuaternion","multiply","setLength","atom","Hierarchy","useMol","Recursion","c","grandren","Atom","geometry","material","calc","calcPos","useAtom","state","useMemo","useEffect","p","Render","maxLength","group","useRef","meshs","forEach","current","createRef","useFrame","mols","mesh","s","setColorAt","setMatrixAt","instanceMatrix","needsUpdate","ref","Mol","calcMol","Hel","H","element","C","O","CH3","sqrt2_3","sqrt","sqrt1_3","target","parent","phi","cos","sin","parentProps","distance"],"mappings":"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","file":"static/js/main.a05fa967.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\nimport {C, H, O, CH3, Poly} from '../src'\r\nexport const H2O =()=> <H><O><H/></O></H>\r\nexport const CH4 =()=> <C><H/><H/><H/><H/></C>\r\nexport const CH3OH =()=>\r\n    <H>\r\n        <O angle={Math.PI}>\r\n            <C><H/><H/><H/></C>\r\n        </O>\r\n    </H>\r\nexport const CH3COOH =()=>\r\n    <C>\r\n        <C><H/><H/><H/></C>\r\n        <O><H/></O>\r\n        <O double/>\r\n    </C>\r\nexport const Polyethylene =()=>\r\n    <H>\r\n        <Poly n={2}>\r\n        {children =>\r\n            <C angle={Math.PI}>\r\n                <C>\r\n                    {children||<H/>}\r\n                    <H/><H/>\r\n                </C>\r\n                <H/><H/>\r\n            </C>\r\n        }\r\n        </Poly>\r\n    </H>\r\nexport const Polypropylene =()=>\r\n    <H>\r\n        <Poly n={2}>\r\n        {(children, i) =>\r\n            <C angle={Math.PI}>\r\n                <C>\r\n                    {children||<H/>}\r\n                    <CH3 angle={i%2*Math.PI}/>\r\n                    <H/>\r\n                </C>\r\n                <H/><H/>\r\n            </C>\r\n        }\r\n        </Poly>\r\n    </H>\r\nexport const Random =({rand=(mul=Math.PI*2)=>Math.random()*mul})=>\r\n    <H>\r\n        <Poly n={100}>\r\n        {children =>\r\n            <C angle={rand()}>\r\n                <C angle={rand()}>\r\n                    {children||<H/>}\r\n                    <H/>\r\n                    <C><H/><H/><H/></C>\r\n                </C>\r\n                <H/><H/>\r\n            </C>\r\n        }\r\n        </Poly>\r\n    </H>\r\n","import React from 'react'\r\nimport {Mol as M, C, H, O, CH3,} from '../src'\r\nexport const H2O =()=> <M recursion><H/><O/><H/></M>\r\nexport const CH4 =()=> <M recursion><H/><C><H/><H/><H/></C></M>\r\nexport const CH3OH =()=>\r\n    <M recursion>\r\n        <C><H/><H/><H/></C>\r\n        <O><H/></O>\r\n    </M>\r\nexport const CH3COOH =()=>\r\n    <M recursion>\r\n        <C><H/><H/><H/></C>\r\n        <C><O double/></C>\r\n        <O><H/></O>\r\n    </M>\r\nexport const Polyethylene =()=>\r\n    <M recursion>\r\n        <H/>\r\n        {Array(6).fill(0).map((_, i) =>\r\n            <C key={i} angle={(i%2)?Math.PI:0}>\r\n                <H/><H/>\r\n            </C>\r\n        )}\r\n        <H/>\r\n    </M>\r\nexport const Polypropylene =()=>\r\n    <M recursion>\r\n        <H/>\r\n        {Array(6).fill(0).map((_, i) =>\r\n            <C key={i} angle={(i%2)?Math.PI:0}>\r\n                {(i%2)\r\n                    ? <CH3 angle={(i%4)?Math.PI:0}/>\r\n                    : <H/>\r\n                }\r\n                <H/>\r\n            </C>\r\n        )}\r\n        <H/>\r\n    </M>\r\n\r\nexport const Random =({rand=(mul=Math.PI*2)=>Math.random()*mul})=>\r\n    <M recursion>\r\n        <H/>\r\n        {Array(200).fill(0).map((_, i) =>\r\n            <C key={i} angle={rand()}>\r\n                {(i%2)\r\n                    ? <CH3 angle={rand()}/>\r\n                    : <H/>\r\n                }\r\n                <H/>\r\n            </C>\r\n        )}\r\n        <H/>\r\n    </M>\r\n","import React from 'react'\r\nimport {Hel} from '../src'\r\nexport const Test =()=> (\r\n    <Hel>\r\n        <Hel/>\r\n    </Hel>\r\n)\r\nexport const Archimedes =()=> (\r\n    <Hel>\r\n    </Hel>\r\n)\r\nexport const Fermat =()=> (\r\n    <Hel>\r\n    </Hel>\r\n)\r\nexport const Power =()=> (\r\n    <Hel>\r\n    </Hel>\r\n)\r\n","import React from 'react'\r\nimport {Canvas} from 'react-three-fiber'\r\nimport {OrbitControls} from 'drei'\r\nimport {Helmet} from 'react-helmet-async';\r\nimport * as MOLSH from './MolsHierarchy'\r\nimport * as MOLSR from './MolsRecursion'\r\nimport * as HELS from './Hels'\r\n\r\nconst Link =({path=\"\",name=\"\"})=> (\r\n    <div onClick={() => void (window.location.href = \"/rmol/\"+path+name)}>{name}</div>\r\n)\r\nconst Button =({loc=\"\",alt=\"\",src=\"\",br=false})=> (\r\n    <>\r\n        <a href={(src?\"https://\":\"\")+loc}>\r\n            <img alt={alt} src={\"https://\"+(\r\n                src||`img.shields.io/badge/${alt}-gray.svg`\r\n            )}/>\r\n        </a>\r\n        {br && <br/>}\r\n    </>\r\n)\r\nconst TWEET = \"🍡A molecular chemistry based simulation library\"\r\nconst INDEX: any = {\r\n    _: Object.keys(MOLSH).map(key => <Link key={key} name={key} />),\r\n    m: Object.keys(MOLSR).map(key => <Link key={key} name={key} path=\"m/\" />),\r\n    h: Object.keys(HELS ).map(key => <Link key={key} name={key} path=\"h/\" />),\r\n}\r\n\r\nexport const App: React.FC = ({children}) => {\r\n    const paths = window.location.pathname.split('/').filter(v=>v)\r\n    return (\r\n        <>\r\n            <Canvas\r\n                style={{position:\"absolute\", width:'100%', height: '100%', top:0, left:0, zIndex:-1}}\r\n                gl={{ alpha: true, antialias: false, logarithmicDepthBuffer: true }}\r\n                camera={{ fov: 75, position: [0, 0, 5] }}>\r\n                <ambientLight intensity={1} />\r\n                <pointLight position={[ 100, 100, 100]} intensity={2.2} />\r\n                <pointLight position={[-100,-100,-100]} intensity={5} color=\"red\" />\r\n                <OrbitControls />\r\n                <mesh position={[0, 0, -10]}>\r\n                    <circleBufferGeometry attach=\"geometry\" args={[8, 64]} />\r\n                    <meshBasicMaterial attach=\"material\" color=\"lightpink\" />\r\n                </mesh>\r\n                {children}\r\n            </Canvas>\r\n            <div style={{position:\"absolute\", userSelect:\"none\",fontSize:\"1.5rem\", display:\"inline-block\"}}>\r\n                {INDEX[paths[1]] || INDEX._}\r\n                <Button loc=\"/rmol/\"   alt=\"Hierarchy\" />\r\n                <Button loc=\"/rmol/m/\" alt=\"Recursion\" br />\r\n                <Button loc=\"/rmol/h/\" alt=\"Helical\" />\r\n                <Button loc=\"/rmol/s/\" alt=\"Sign\" />\r\n                <Button loc=\"/rmol/t/\" alt=\"Tree\" />\r\n                <Button loc=\"/rmol/f/\" alt=\"Flow\" br/>\r\n                <Button loc=\"github.com/tseijp/react-mol\"     alt=\"license MIT\"/>\r\n                <Button loc=\"www.npmjs.com/package/react-mol\" alt=\"npm version\"\r\n                        src=\"badge.fury.io/js/react-mol.svg\"  br/>\r\n                <Button loc={`twitter.com/intent/tweet?url=https=//tsei.jp/rmol/&text=${TWEET}`} alt=\"Tweet\"\r\n                        src=\"img.shields.io/twitter/url?style=social&url=https%3A%2F%2Ftwitter.com%2Ftseijp\"/>\r\n                <Button loc=\"github.com/tseijp/react-mol\" alt=\"GitHub watchers\"\r\n                        src=\"img.shields.io/github/watchers/tseijp/react-mol?style=social\" br/>\r\n            </div>\r\n            <Helmet>\r\n                <title>{window.location.pathname.split('/').slice(-1)[0]}</title>\r\n                <meta charSet=\"utf-8\" />\r\n                <meta name=\"Hatena::Bookmark\" content=\"nocomment\" />\r\n                <link rel=\"canonical\" href=\"https://tsei.jp/\" />\r\n            </Helmet>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport {unregister}  from './utils'\nimport {HelmetProvider} from 'react-helmet-async'\nimport {BrowserRouter, Route, Redirect, Switch} from 'react-router-dom'\nimport * as HIERARCHY from './MolsHierarchy'\nimport * as RECURSION from './MolsRecursion'\nimport * as HELS from './Hels'\nimport {App} from './App'\nconst About =()=> <>TODO</>\nconst Basic =()=> <>TODO</>\nconst Root  =()=> (\n    <HelmetProvider>\n        <BrowserRouter>\n            <Switch>\n                {Object.entries(HIERARCHY).map(([k, V]) =>\n                <Route path={\"/rmol/\"+k}   component={()=><App><V/></App>} key={k}/> )}\n                {Object.entries(RECURSION).map(([k, V]) =>\n                <Route path={\"/rmol/m/\"+k} component={()=><App><V/></App>} key={k}/> )}\n                {Object.entries(HELS).map(([k, V]) =>\n                <Route path={\"/rmol/h/\"+k} component={()=><App><V/></App>} key={k}/> )}\n                <Route path=\"/rmol/\"       component={()=><App><HIERARCHY.Random/></App>} exact/>\n                <Route path=\"/rmol/m/\"     component={()=><App><RECURSION.CH3OH/></App>} exact/>\n                <Route path=\"/rmol/about\"  component={About} exact/>\n                <Route path=\"/rmol/basic\"  component={Basic} exact/>\n                <Redirect to='/rmol/' />\n            </Switch>\n        </BrowserRouter>\n    </HelmetProvider>\n)\n\nReactDOM.render(<Root/>, document.getElementById('root'));\nunregister();\n","import React from 'react'\r\nimport {Props} from '../types'\r\nexport function calcHel ({children, ...props}:Props): Props[] {\r\n    const clone = React.Children.map(children, (child:any) => {\r\n        if (!child) return null\r\n        return React.cloneElement(child, {\r\n            ...props, ...child.props,\r\n            position: [1,1,1],\r\n            depth: (props.depth||0) + 1,\r\n        })\r\n    })\r\n    return [{...props, children: clone}]\r\n}\r\n","import * as THREE from 'three'\r\nimport {atom} from 'jotai'\r\nimport {Props as MP,Vec3} from './types'\r\n\r\nconst base = new THREE.Vector3(0,1,0)\r\nconst axis = new THREE.Vector3()\r\nconst vec3 = new THREE.Vector3()\r\nconst temp = new THREE.Object3D()\r\nconst color= new THREE.Color()\r\nconst euler= new THREE.Euler()\r\nconst quat1= new THREE.Quaternion()\r\nconst quat2= new THREE.Quaternion()\r\n\r\nexport function mergeVec3(rate:number[], ...vec:Vec3[]): Vec3 {\r\n    return [0,1,2].map(j => rate.map((r,i) => r*vec[i][j]).reduce((a,b) => a+b)) as Vec3\r\n}\r\nexport function scaleVec3(vec:Vec3=[0,0,0]): Vec3 {\r\n    return [1, vec3.set(...vec).length(), 1] as Vec3\r\n}\r\nexport function eulerVec3(vec:Vec3=[0,0,0]): Vec3 {\r\n    axis.set(...vec)\r\n    quat1.setFromUnitVectors(base, axis);\r\n    euler.setFromQuaternion(quat1)\r\n    return euler.toArray().slice(0,3) as Vec3\r\n}\r\nexport function calcColor (_color=\"white\") {\r\n    return color.setColorName(_color)\r\n}\r\nexport function calcMatrix (position:Vec3=[0,0,0], rotation:Vec3=[0,0,0], scale:Vec3=[1,1,1]) {\r\n    temp.position.set(...position)\r\n    temp.rotation.set(...rotation)\r\n    temp.scale.set(...scale)\r\n    temp.updateMatrix()\r\n    return temp.matrix\r\n}\r\nexport function calcRelative (position:Vec3=[0,0,0], rotation:Vec3=[0,0,0], direction:Vec3=[0,1,0]) {\r\n    axis.set (...direction).normalize() // TODO use group.updateMatrix()\r\n    euler.set(...rotation)\r\n    quat1.setFromUnitVectors(base, axis)\r\n    quat2.setFromEuler(euler)\r\n    return  vec3.set(...position)\r\n                .normalize()\r\n                .applyQuaternion(quat1.multiply(quat2))\r\n                .setLength(1)\r\n                .toArray() as Vec3\r\n}\r\n\r\nexport const render = atom<[Partial<MP>, Partial<MP>][]>([])\r\n\r\n// TODO use parent: CH3OH = (H)-(O)-(CH3)\r\n// - now  calcAtom: (H: parent)-(O: me)-(CH3: calc child): using O and CH3\r\n// - next calcAtom: (H: parent)-(O: calc me)-(CH3: not using child): using H and O\r\n","import React, {Children} from 'react'\r\nimport {Provider} from 'jotai'\r\nimport {Render} from './Render'\r\nimport {useMol} from './useMol'\r\nimport {Props} from './types'\r\nexport const Hierarchy = (props:any) => <bone {...useMol(props)}/>\r\nexport const Recursion = (props:any) => {\r\n    const [child, ...children] = Children.map(props.children, c=>c)\r\n    if (typeof child!==\"object\") return null\r\n    const grandren = Children.map(child.props.children, c=>c)\r\n    return React.cloneElement(child, {\r\n        ...props, depth: 1, recursion: false, children: [\r\n            ...(grandren || []).slice(props.length),\r\n            <Recursion key={-1} {...{children}}/>\r\n        ]\r\n    })\r\n}\r\nexport function Atom <S extends object> (\r\n    props: unknown & Partial<Props>\r\n): null | JSX.Element\r\n\r\nexport function Atom ({\r\n    geometry,\r\n    material,\r\n    children,\r\n    length=0,\r\n    depth =0,\r\n    ...props\r\n}: any) {\r\n    if (!(children instanceof Array)) children = Children.map(children, c=>c)\r\n    const Atom = props.recursion? Recursion : Hierarchy\r\n    if (typeof depth===\"number\" && depth > 0)\r\n        return <Atom {...props}>{children.slice(length*2)}</Atom>\r\n    return (\r\n        <Provider>\r\n            <Render length={length}>\r\n                {[...children.slice(0,length*2),\r\n                <Atom {...props} key={0}\r\n                    position= {props.position|| [0,0,0]}\r\n                    calc    = {props.calc       }\r\n                    calcPos = {props.calcPos}>\r\n                    {children.slice(length*2)}\r\n                </Atom>]}\r\n            </Render>\r\n        </Provider>\r\n    )\r\n}\r\n","import {useEffect, useMemo} from 'react'\r\nimport {useAtom} from 'jotai'\r\nimport {Props} from './types'\r\nimport {render} from './utils'\r\n\r\nexport function useMol <S extends object> (\r\n    props:Partial<Props>,\r\n): Partial<Props>\r\n\r\nexport function useMol(props: any) {\r\n    const [,set] = useAtom(render)\r\n    const state  = useMemo(() => props.calc(props), [props])\r\n    useEffect(() => {set(p => [...p, state])}, [set, state])\r\n    return state[0]\r\n}\r\n","import React, {Children, ReactNode, createRef, useRef} from 'react'\r\nimport {useFrame} from 'react-three-fiber'\r\nimport {useAtom} from 'jotai'\r\nimport {render,calcMatrix,calcColor,mergeVec3} from './utils'\r\n\r\nexport function Render (props: {\r\n    length: number,\r\n    maxLength?: number\r\n    children: ReactNode\r\n}) : JSX.Element\r\n\r\nexport function Render ({\r\n    length=1,\r\n    maxLength=1000,\r\n    geometry,\r\n    material,\r\n    children,\r\n    ...props\r\n}: any) {\r\n    if (!(children instanceof Array)) children = Children.map(children, c=>c)\r\n    if (!(geometry instanceof Array)) geometry = [geometry]\r\n    if (!(material instanceof Array)) material = [material]\r\n    const group = useRef<any>(null) // TODO set type\r\n    const meshs = useRef<any>([])\r\n    const [atom] = useAtom(render)\r\n    Array(length).fill(0).forEach((_, i) => {\r\n        meshs.current[i] = createRef();\r\n    })\r\n    useFrame(() => {\r\n        atom.forEach((mols, j) => {\r\n            meshs.current.forEach((mesh:any, i=0) => {\r\n                const {color, position:p, rotation:r, scale:s} = mols[i]\r\n                mesh.current.setColorAt (j, calcColor (color))\r\n                mesh.current.setMatrixAt(j, calcMatrix(p,r,s))\r\n            })\r\n        })\r\n        meshs.current.forEach((mesh:any) => {\r\n            mesh.current.instanceMatrix.needsUpdate = true\r\n        })\r\n        atom.length && group.current.position.set(...mergeVec3([-.5,-.5],\r\n            atom[0][0]?.position||[0,0,0],\r\n            atom[atom.length-1][0]?.position||[0,0,0])\r\n        )\r\n    })\r\n    return (\r\n        <group {...props}>\r\n            <group ref={group}>\r\n            {Array(length).fill(0).map((_,i) =>\r\n                <instancedMesh\r\n                    key={i} ref={meshs.current[i]}\r\n                    args={[null,null,maxLength] as [any,any,number]}>\r\n                    {children.slice(i*2, i*2+2)}\r\n                </instancedMesh>\r\n            )}\r\n            {children.slice(length)}\r\n            </group>\r\n        </group>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {Props} from './types'\r\nimport {Atom} from './Atom'\r\nimport {calcPos, calcMol, calcHel} from './calc'\r\n//  ************************* REACT-MOL ************************* //\r\nexport {Atom as default, Atom, Hierarchy, Recursion} from './Atom'\r\nexport {Poly} from './Poly'\r\nexport {Render} from './Render'\r\nexport {useMol} from './useMol'\r\nexport * from './utils'\r\nexport * from './types'\r\ntype P = Partial<Props>\r\nexport const Sign = () => <>TODO</>\r\nexport const Tree = () => <>TODO</>\r\nexport const Flow = () => <>TODO</>\r\nexport const Mol = (props:P) => (\r\n    <Atom length={2} {...props} calc={calcMol} calcPos={calcPos}>\r\n        <sphereBufferGeometry attach=\"geometry\" args={[1, 32, 32]} />\r\n        <meshPhongMaterial    attach=\"material\" color={0xffffff} />\r\n        <cylinderBufferGeometry attach=\"geometry\" args={[.05, .05, 1, 10]} />\r\n        <meshPhongMaterial      attach=\"material\" color={0xffffff} />\r\n        {props.children}\r\n    </Atom>\r\n)\r\nexport const Hel = (props:P) => (\r\n    <Atom length={1} {...props} calc={calcHel}>\r\n        <boxBufferGeometry attach=\"geometry\" args={[1,1,1]} />\r\n        <meshPhongMaterial attach=\"material\" />\r\n        {props.children}\r\n    </Atom>\r\n)\r\nexport const H =(p:P)=> <Mol {...p} element={1} scale={[.2,.2,.2]} color=\"white\"/>\r\nexport const C =(p:P)=> <Mol {...p} element={6} scale={[.3,.3,.3]} color=\"black\"/>\r\nexport const O =(p:P)=> <Mol {...p} element={8} scale={[.4,.4,.4]} color=\"red\"/>\r\nexport const OH =(p:P)=> <O {...p}><H/></O>\r\nexport const CO =(p:P)=> <C {...p}><O double/></C>\r\nexport const CH =(p:P)=> <C {...p}><H/></C>\r\nexport const CH2 =(p:P)=> <C {...p}><H/><H/></C>\r\nexport const CH3 =(p:P)=> <C {...p}><H/><H/><H/></C>\r\n","import React from 'react'\r\nimport {Props} from './types'\r\n\r\nexport function Poly (props: Partial<Props> & Partial<{\r\n    children: null|((child:JSX.Element, key:number) => JSX.Element),\r\n    n: number\r\n}>): null|JSX.Element\r\n\r\nexport function Poly ({children,n=0,...props}:any) {\r\n    return n>-1? React.cloneElement(\r\n        children(n>0 && <Poly n={n-1} children={children}/>, n),\r\n        props\r\n    ) : null\r\n}\r\n","import React from 'react'\r\nimport {Vec3, Props} from '../types'\r\nimport {eulerVec3, scaleVec3, mergeVec3, calcRelative} from '../utils'\r\n\r\nconst sqrt2_3 = Math.sqrt(2/3)\r\nconst sqrt1_3 = Math.sqrt(1/3)\r\n\r\nexport function calcPos (target:Props, parent:Props, key=0): Vec3 {\r\n    const phi = key* Math.PI* 2/3 + (parent.angle || 0)\r\n    const vec = [sqrt2_3*Math.cos(phi), sqrt1_3, sqrt2_3*Math.sin(phi)]\r\n    return mergeVec3(Array(4).fill(1),\r\n        calcRelative((key<3? vec: [0,-1,0]) as Vec3, target.rotation, parent.direction),\r\n        parent.position || [0,0,0], // TODO use group.updateMatrix()\r\n        target.position || [0,0,0],\r\n        target.double\r\n            ? calcPos({...target,double:false}, parent,key+(key?2:3))\r\n            : [0,0,0]\r\n    )\r\n}\r\nexport const calcMol = ({children, ...props}:Props): Props[] => {\r\n    const {position: target=[0,0,0], parentProps} = props\r\n    const position = mergeVec3([.5,.5], target, parentProps?.position||target)\r\n    const distance = mergeVec3([ 1,-1], target, parentProps?.position||target)\r\n    const rotation = eulerVec3(distance)\r\n    const scale    = scaleVec3(distance)\r\n    const clone    = React.Children.map(children, (child:any, key) => {\r\n        if (!child) return null\r\n        const position  = props.calcPos(child.props, props as any, key)\r\n        const direction = mergeVec3([1,-1], position, props.position)\r\n        return React.cloneElement(child, {\r\n            ...props, parentProps: props, position, direction,\r\n            ...child.props, depth:(props.depth||0) + 1, \r\n        })\r\n    })\r\n    return [\r\n        {...props, children: clone},\r\n        {...props, position, rotation, scale} as any,\r\n    ]\r\n}\r\n"],"sourceRoot":""}