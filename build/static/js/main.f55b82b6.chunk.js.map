{"version":3,"sources":["docs/utils/serviceWorker.ts","docs/mols.tsx","docs/index.tsx","src/utils.ts","src/Mol.tsx","src/useMol.ts","src/Render.tsx","src/index.tsx","src/Poly.tsx"],"names":["Boolean","window","location","hostname","match","H2O","CH4","CH3OH","angle","Math","PI","CH3COOH","double","Polyethylene","Poly","poly","children","props","Polypropylene","i","MCH3OH","MCH3COOH","MPolyethylene","Array","fill","map","_","key","MPolypropylene","MCH3COCH3","About","Basic","App","style","position","width","height","top","left","zIndex","gl","alpha","antialias","logarithmicDepthBuffer","camera","fov","intensity","color","attach","args","fallback","userSelect","fontSize","display","Object","keys","MOLS","onClick","href","alt","src","Home","rand","mul","random","Root","path","component","exact","entries","Val","to","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message","base","THREE","axis","temp","euler","quat1","quat2","sqrt23","sqrt","sqrt13","mergeVec3","rate","vec","j","r","reduce","a","b","scaleVec3","vector","length","eulerVec3","set","setFromUnitVectors","setFromQuaternion","toArray","slice","calcPosition","child","parent","dis","phi","cos","sin","direction","normalize","rotation","setFromEuler","applyQuaternion","multiply","setLength","calcRotation","atoms","atom","bones","get","parentProps","distance","scale","is","arr","isArray","obj","prototype","toString","call","fun","str","num","und","nul","Set","Map","equ","Hierarchy","useMol","Recursion","React","Children","c","grand","cloneElement","Mol","renderConfig","depth","Atom","element","useAtom","state","useMemo","useEffect","p","Render","group","useRef","bone","_a","_b","_c","useFrame","forEach","updateMatrix","current","setColorAt","setColorName","setMatrixAt","matrix","instanceMatrix","needsUpdate","ref","H","C","O","CH3"],"mappings":"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","file":"static/js/main.f55b82b6.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\r\nimport {\r\n    C, H, O, M,\r\n    CH3, //CH2, CH, OH, // ERROR : for Recursion \r\n    Poly} from '../src'\r\nexport const H2O =()=> <H><O><H/></O></H>\r\nexport const CH4 =()=> <C><H/><H/><H/><H/></C>\r\nexport const CH3OH =()=>\r\n    <H>\r\n        <O angle={Math.PI}>\r\n        <C><H/><H/><H/></C>\r\n        </O>\r\n    </H>\r\nexport const CH3COOH =()=>\r\n    <C>\r\n        <C><H/><H/><H/></C>\r\n        <O><H/></O>\r\n        <O double/>\r\n    </C>\r\nexport const Polyethylene =()=>\r\n    <H>\r\n        <Poly poly={2}>\r\n        {(children,props) =>\r\n            <C {...props} angle={Math.PI}>\r\n                <C>\r\n                    {children||<H/>}\r\n                    <H/><H/>\r\n                </C>\r\n                <H/><H/>\r\n            </C>\r\n        }\r\n        </Poly>\r\n    </H>\r\nexport const Polypropylene =()=>\r\n    <H>\r\n        <Poly poly={2}>\r\n        {(children, props, i) =>\r\n            <C {...props} angle={Math.PI}>\r\n                <C>\r\n                    {children||<H/>}\r\n                    <CH3 angle={i%2*Math.PI}/>\r\n                    <H/>\r\n                </C>\r\n                <H/><H/>\r\n            </C>\r\n        }\r\n        </Poly>\r\n    </H>\r\nexport const MCH3OH =()=>\r\n    <M>\r\n        <C><H/><H/><H/></C>\r\n        <O><H/></O>\r\n    </M>\r\nexport const MCH3COOH =()=>\r\n    <M>\r\n        <C><H/><H/><H/></C>\r\n        <C><O double/></C>\r\n        <O><H/></O>\r\n    </M>\r\nexport const MPolyethylene =()=>\r\n    <M>\r\n        <H/>\r\n        {Array(6).fill(0).map((_, i) =>\r\n            <C key={i} angle={(i%2)?Math.PI:0}>\r\n                <H/><H/>\r\n            </C>\r\n        )}\r\n        <H/>\r\n    </M>\r\nexport const MPolypropylene =()=>\r\n    <M>\r\n        <H/>\r\n        {Array(6).fill(0).map((_, i) =>\r\n            <C key={i} angle={(i%2)?Math.PI:0}>\r\n                {(i%2)\r\n                    ? <CH3 angle={(i%4)?Math.PI:0}/>\r\n                    : <H/>\r\n                }\r\n                <H/>\r\n            </C>\r\n        )}\r\n        <H/>\r\n    </M>\r\nexport const MCH3COCH3 =()=>\r\n    <M>\r\n        <C><H/><H/><H/></C>\r\n        <C><O double/></C>\r\n        <C><H/><H/><H/></C>\r\n    </M>\r\n","import React, {Suspense} from 'react'\nimport ReactDOM from 'react-dom'\nimport {Canvas} from 'react-three-fiber'\nimport {unregister}  from './utils'\nimport {OrbitControls} from 'drei'\nimport {HelmetProvider} from 'react-helmet-async'\nimport {BrowserRouter, Route, Redirect, Switch} from 'react-router-dom'\nimport {C, H, Poly} from '../src'\nimport * as MOLS from './mols'\nconst About = () => <>TODO</>\nconst Basic = () => <>TODO</>\n\nconst App:React.FC = ({children}) => {\n    return (\n        <>\n            <Canvas\n                style={{position:\"absolute\", width:'100%', height: '100%', top:0, left:0, zIndex:-1}}\n                gl={{ alpha: true, antialias: false, logarithmicDepthBuffer: true }}\n                camera={{ fov: 75, position: [0, 0, 5] }}>\n                <ambientLight intensity={1} />\n                <pointLight position={[100, 100, 100]} intensity={2.2} />\n                <pointLight position={[-100, -100, -100]} intensity={5} color=\"red\" />\n                <OrbitControls />\n                <mesh position={[0, 0, -10]}>\n                    <circleBufferGeometry attach=\"geometry\" args={[8, 64]} />\n                    <meshBasicMaterial attach=\"material\" color=\"lightpink\" />\n                </mesh>\n                <Suspense fallback={null}>\n                    {children}\n                </Suspense>\n            </Canvas>\n            <div style={{position:\"absolute\", userSelect:\"none\",fontSize:\"1.5rem\", display:\"inline-block\"}}>\n                {Object.keys(MOLS).map(key =>\n                    <div key={key} onClick={()=>void (window.location.href = \"/rmol/\"+key)}>{key}</div>\n                )}\n                <a href=\"https://twitter.com/intent/tweet?url=https://tsei.jp/rmol/&text=üç°A molecular chemistry based simulation library\" >\n                    <img alt=\"tweet\" src=\"https://img.shields.io/twitter/url?style=social&url=https%3A%2F%2Ftwitter.com%2Ftseijp\"/></a>\n                <a href=\"https://github.com/tseijp/react-mol\">\n                    <img alt=\"GitHub watchers\" src=\"https://img.shields.io/github/watchers/tseijp/react-mol?style=social\"/></a>\n                <br/>\n                <a href=\"https://github.com/tseijp/react-mol\">\n                    <img alt=\"license MIT\" src=\"https://img.shields.io/badge/license-MIT-green.svg\"/></a>\n                <a href=\"https://www.npmjs.com/package/react-mol\">\n                    <img src=\"https://badge.fury.io/js/react-mol.svg\" alt=\"npm version\" height=\"18\"/></a>\n            </div>\n        </>\n    )\n}\nexport const Home =({rand=(mul=Math.PI*2)=>Math.random()*mul})=>\n    <App>\n        <H>\n            <Poly poly={100}>\n            {(children,props) =>\n                <C {...props} angle={rand()}>\n                    <C angle={rand()}>\n                        {children||<H/>}\n                        <H/>\n                        <C><H/><H/><H/></C>\n                    </C>\n                    <H/><H/>\n                </C>\n            }\n            </Poly>\n        </H>\n    </App>\n\nconst Root = () => (\n    <HelmetProvider>\n            <BrowserRouter>\n                <Switch>\n                    <Route path=\"/rmol/\"      component={Home} exact/>\n                    <Route path=\"/rmol/about\" component={About} exact/>\n                    <Route path=\"/rmol/basic\" component={Basic} exact/>\n                    {Object.entries(MOLS).map(([key, Val]) =>\n                    <Route key={key} path={\"/rmol/\"+key} component={()=><App><Val/></App>} /> )}\n                    <Redirect to='/rmol/' />\n                </Switch>\n            </BrowserRouter>\n    </HelmetProvider>\n)\n\nReactDOM.render(\n    <Root />,\n    document.getElementById('root')\n);\n\nunregister();\n","import {atom} from 'jotai'\r\nimport {MolProps,Vec3} from './types'\r\nimport * as THREE from 'three'\r\n\r\nconst base = new THREE.Vector3(0,1,0)\r\nconst axis = new THREE.Vector3()\r\nconst temp = new THREE.Vector3()\r\nconst euler = new THREE.Euler()\r\nconst quat1 = new THREE.Quaternion()\r\nconst quat2 = new THREE.Quaternion()\r\nconst sqrt23 = Math.sqrt(2/3)\r\nconst sqrt13 = Math.sqrt(1/3)\r\n\r\n// ************************* üç° bone üç° ************************* //\r\nexport function mergeVec3(rate:number[], ...vec:Vec3[]) {\r\n    return [0,1,2].map(j=>\r\n        rate.map((r,i) => r*vec[i][j]).reduce((a,b) => a+b)\r\n    ) as Vec3\r\n\r\n}\r\nexport function scaleVec3(vec:Vec3=[0,0,0]) {\r\n    const vector = new THREE.Vector3(...vec)\r\n    return [1, vector.length(), 1] as Vec3\r\n}\r\nexport function eulerVec3(vec:Vec3=[0,0,0]) {\r\n    axis.set(...vec)\r\n    quat1.setFromUnitVectors(base, axis);\r\n    euler.setFromQuaternion(quat1)\r\n    return euler.toArray().slice(0,3) as Vec3\r\n}\r\n\r\n// ************************* üç° atom üç° ************************* //\r\nexport function calcPosition (child:MolProps, parent:MolProps, key:number): Vec3\r\nexport function calcPosition (child:any, parent:any, key=0) {\r\n    const dis = 1 //TODO calcDistance\r\n    const phi = key* Math.PI* 2/3 + (parent.angle || 0)\r\n    const vec = [sqrt23*Math.cos(phi), sqrt13, sqrt23*Math.sin(phi)]\r\n    axis.set(...(parent.direction as Vec3||[0,1,0])).normalize()\r\n    temp.set(...(key<3? vec as Vec3: [0,-1,0] as Vec3)).normalize()\r\n    euler.set(...(child.rotation as Vec3||[0,0,0]))\r\n    quat1.setFromUnitVectors(base, axis)\r\n    quat2.setFromEuler(euler)\r\n    temp.applyQuaternion(quat1.multiply(quat2))\r\n    temp.setLength(dis)\r\n    return mergeVec3(Array(4).fill(1),\r\n        temp.toArray() as Vec3,\r\n        child.position ||[0,0,0],\r\n        parent.position||[0,0,0],\r\n        child.double\r\n            ? calcPosition({...child,double:false}, parent,key+(key?2:3))\r\n            : [0,0,0]\r\n    )\r\n}\r\nexport function calcRotation (child:Vec3, parent:Vec3) {\r\n    return mergeVec3([1,-1], child, parent)\r\n}\r\n\r\n// ************************* üëª jotai üëª ************************* //\r\nexport const atoms = atom<MolProps[]>([])\r\nexport const bones = atom((get) => get(atoms).map(({\r\n    position:child=[0,0,0],\r\n    parentProps:{position:parent}={},\r\n    color\r\n}) => {\r\n    const position = mergeVec3([.5,.5], child, parent||child)\r\n    const distance = mergeVec3([ 1,-1], child, parent||child)\r\n    return {\r\n        position, color,\r\n        rotation: eulerVec3(distance),\r\n        scale   : scaleVec3(distance),\r\n    }\r\n}))\r\n\r\n// ************************* üç≠ helpers üç≠ ************************* //\r\n// * This function is fork of react-spring\r\n// * Code : https://github.com/pmndrs/react-spring/blob/master/src/shared/helpers.ts\r\n// ************************* *************** ************************* //\r\nexport const is = {\r\n    arr: Array.isArray,\r\n    obj: (a: unknown): a is object    => Object.prototype.toString.call(a) === '[object Object]',\r\n    fun: (a: unknown): a is Function  => typeof a === 'function',\r\n    str: (a: unknown): a is string    => typeof a === 'string',\r\n    num: (a: unknown): a is number    => typeof a === 'number',\r\n    und: (a: unknown): a is undefined => a === void 0,\r\n    nul: (a: unknown): a is null      => a === null,\r\n    set: (a: unknown): a is Set<any>  => a instanceof Set,\r\n    map: (a: unknown): a is Map<any, any> => a instanceof Map,\r\n    equ(a: any, b: any) {\r\n    if (typeof a !== typeof b) return false\r\n        if (is.str(a) || is.num(a)) return a === b\r\n        if (is.obj(a) &&\r\n            is.obj(b) &&\r\n            Object.keys(a).length + Object.keys(b).length === 0)\r\n            return true\r\n        let i\r\n        for (i in a) if (!(i in b))     return false\r\n        for (i in b) if (a[i] !== b[i]) return false\r\n        return is.und(i) ? a === b : true\r\n    },\r\n}\r\n\r\nexport function merge(target: any, lowercase: boolean = true) {\r\n  return (object: object) =>\r\n    (is.arr(object) ? object : Object.keys(object)).reduce(\r\n        (acc: any, element) => {\r\n            const key = lowercase\r\n              ? element[0].toLowerCase() + element.substring(1)\r\n              : element\r\n            acc[key] = target(key)\r\n            return acc\r\n        },\r\n        target\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {Provider} from 'jotai'\r\nimport {MolProps} from './types'\r\nimport {Render} from './Render'\r\nimport {useMol} from './useMol'\r\n\r\n// export function childrenToArray(props: any): any[] {\r\n//     const children = React.Children.map(props.children, child => child)\r\n//     return children instanceof Array && children.length > 1\r\n//         ? children\r\n//         : childrenToArray(children[0].props)\r\n// }\r\nexport const Hierarchy = (props:any) => <bone {...useMol(props)}/>\r\nexport const Recursion = (props:any) => {\r\n    const [child, ...grand] = React.Children.map(props.children, c=>c)\r\n    return typeof child!==\"object\"? null: React.cloneElement(child, {\r\n        ...props, children: [\r\n            ...(React.Children.toArray(child.props.children)||[]),\r\n            <Recursion>{grand}</Recursion>\r\n        ]\r\n    })\r\n}\r\n\r\nexport function Mol <S extends object> (props: unknown & MolProps): any//JSX.Element | null // TODO\r\nexport function Mol ({renderConfig={}, depth=0, ...props}:any) {\r\n    const Atom = props.element? Hierarchy : Recursion\r\n    return depth < 1\r\n        ?   <Provider>\r\n                <Render {...renderConfig}>\r\n                    <Atom {...props} position={props.position||[0,0,0]}/>\r\n                </Render>\r\n            </Provider>\r\n        : <Atom {...props}/>\r\n}\r\nexport default Mol\r\n","import React, {Children, useMemo} from 'react'\r\nimport {useAtom} from 'jotai'\r\nimport {MolProps} from './types'\r\nimport {atoms, calcPosition, calcRotation} from './utils'\r\n\r\nexport function useMol <S extends object> (\r\n    props:MolProps,\r\n) : MolProps\r\n\r\nexport function useMol(props: any) {\r\n    const [,set] = useAtom(atoms)\r\n    const state = useMemo<MolProps|null>(() => {\r\n        const children = Children.map(props.children, (child:any, key) => {\r\n            const position = calcPosition(child.props, props, key)\r\n            const direction = calcRotation(position, props.position)\r\n            return child && React.cloneElement(child, {\r\n                parentProps: props, position, direction,\r\n                scale: child.props.scale || props.scale,\r\n                color: child.props.color || props.color,\r\n                depth: (props.depth||0) + 1\r\n            })\r\n        })\r\n        return {...props, children}\r\n    }, [props])\r\n    React.useEffect(() => {\r\n        if (state)\r\n            set(p => [...p, state])\r\n    }, [set, state])\r\n    return state\r\n}\r\n","import React, {\r\n    ReactNode, useMemo, useRef\r\n} from 'react'\r\nimport {useFrame} from 'react-three-fiber'\r\nimport * as THREE from 'three'\r\nimport {useAtom} from 'jotai'\r\nimport {atoms, bones, mergeVec3} from './utils'\r\nconst MAX_LENGTH = 1000\r\nexport function Render (props: Partial<{\r\n    children: ReactNode\r\n}>) : JSX.Element\r\n\r\nexport function Render ({children, ...props}:any) {\r\n    const group = useRef<any>(null)\r\n    const atom = useRef<any>(null)\r\n    const bone = useRef<any>(null)\r\n    const [a] = useAtom(atoms)\r\n    const [b] = useAtom(bones)\r\n    const _a = useMemo(() => new THREE.Object3D(), [])\r\n    const _b = useMemo(() => new THREE.Object3D(), [])\r\n    const _c = useMemo(() => new THREE.Color()   , [])\r\n    useFrame(() => {\r\n        a.forEach(({position=[0,0,0], scale=[1,1,1], color=\"white\"}, i) => {\r\n            _a.position.set(...position)\r\n            _a.scale.set(...scale)\r\n            _a.updateMatrix()\r\n            atom.current.setColorAt(i, _c.setColorName(color));\r\n            atom.current.setMatrixAt(i, _a.matrix)\r\n        })\r\n        b.forEach(({position, rotation, scale, color=\"white\"}, i) => {\r\n            _b.position.set(...position)\r\n            _b.rotation.set(...rotation)\r\n            _b.scale.set(...scale)\r\n            _b.updateMatrix()\r\n            bone.current.setColorAt(i, _c.setColorName(color));\r\n            bone.current.setMatrixAt(i, _b.matrix)\r\n        })\r\n        group.current.position.set(...mergeVec3([-.5,-.5],\r\n            a[0]?.position||[0,0,0],\r\n            a[a.length]?.position||[0,0,0])\r\n        )\r\n        atom.current.instanceMatrix.needsUpdate = true\r\n        bone.current.instanceMatrix.needsUpdate = true\r\n    })\r\n    return (\r\n        <group {...props}>\r\n            <group ref={group}>\r\n                <instancedMesh ref={atom} args={[null,null,MAX_LENGTH] as [any,any,number]}>\r\n                    <sphereBufferGeometry attach=\"geometry\" args={[1, 32, 32]} />\r\n                    <meshPhongMaterial    attach=\"material\" color={0xffffff} />\r\n                </instancedMesh>\r\n                <instancedMesh ref={bone} args={[null,null,MAX_LENGTH] as [any,any,number]}>\r\n                    <cylinderBufferGeometry attach=\"geometry\" args={[.05, .05, 1, 10]} />\r\n                    <meshPhongMaterial      attach=\"material\" color={0xffffff} />\r\n                </instancedMesh>\r\n                {children}\r\n            </group>\r\n        </group>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport {MolProps as P} from './types'\r\nimport M from './Mol'\r\nexport {M}\r\n//  ************************* REACT-MOL ************************* //\r\nexport {Mol, Hierarchy, Recursion} from './Mol'\r\nexport {Poly} from './Poly'\r\nexport {Render} from './Render'\r\nexport {useMol} from './useMol'\r\nexport * from './utils'\r\nexport * from './types'\r\n//  ************************* EXAMPLE ************************* //\r\nexport const H  =(p:P)=> <M {...p} element={1} scale={[.2,.2,.2]} color=\"white\"/>\r\nexport const C  =(p:P)=> <M {...p} element={6} scale={[.3,.3,.3]} color=\"black\"/>\r\nexport const O  =(p:P)=> <M {...p} element={8} scale={[.5,.5,.5]} color=\"red\"/>\r\nexport const OH =(p:P)=> <O {...p}><H/></O>\r\nexport const CO =(p:P)=> <C {...p}><O double/></C>\r\nexport const CH =(p:P)=> <C {...p}><H/></C>\r\nexport const CH2 =(p:P)=> <C {...p}><H/><H/></C>\r\nexport const CH3 =(p:P)=> <C {...p}><H/><H/><H/></C>\r\n","import React from 'react'\r\nimport {MolProps} from './types'\r\nexport function Poly (props: MolProps & Partial<{\r\n    children: null|((child:JSX.Element, props:MolProps, key:number) => JSX.Element),\r\n    poly: number\r\n}>): null|JSX.Element\r\nexport function Poly ({children,poly=0,...props}:any) {\r\n    return poly>-1 && children(poly>0 && <Poly poly={poly-1} children={children}/>, props, poly)\r\n}\r\n"],"sourceRoot":""}