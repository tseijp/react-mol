(self.webpackChunk_react_mol_docs=self.webpackChunk_react_mol_docs||[]).push([[386],{53059:function(e,t,n){"use strict";n.d(t,{S:function(){return U}});var r=n(22114),o=n(98621),a=n.n(o),s=(n(7665),n(2784));n(66162);const i={Row:r.R,Label:r.L,Portal:r.P,Overlay:r.O,String:r.a6,Number:r.a7,Boolean:r.a8,Select:r.a9,Vector:r.a,InnerLabel:r.aa};var l=n(28308),c=n(28316),u=n(66799),p=n(91997);const d=/^--/;function m(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||d.test(e)||h.hasOwnProperty(e)&&h[e]?(""+t).trim():t+"px"}const f={};let h={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const g=["Webkit","Ms","Moz","O"];h=Object.keys(h).reduce(((e,t)=>(g.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),h);const b=/^(matrix|translate|scale|rotate|skew)/,y=/^(translate)/,v=/^(rotate|skew)/,x=(e,t)=>u.is.num(e)&&0!==e?e+t:e,O=(e,t)=>u.is.arr(e)?e.every((e=>O(e,t))):u.is.num(e)?e===t:parseFloat(e)===t;class k extends p.rS{constructor({x:e,y:t,z:n,...r}){const o=[],a=[];(e||t||n)&&(o.push([e||0,t||0,n||0]),a.push((e=>[`translate3d(${e.map((e=>x(e,"px"))).join(",")})`,O(e,0)]))),(0,u.rU)(r,((e,t)=>{if("transform"===t)o.push([e||""]),a.push((e=>[e,""===e]));else if(b.test(t)){if(delete r[t],u.is.und(e))return;const n=y.test(t)?"px":v.test(t)?"deg":"";o.push((0,u.qo)(e)),a.push("rotate3d"===t?([e,t,r,o])=>[`rotate3d(${e},${t},${r},${x(o,n)})`,O(o,0)]:e=>[`${t}(${e.map((e=>x(e,n))).join(",")})`,O(e,t.startsWith("scale")?1:0)])}})),o.length&&(r.transform=new w(o,a)),super(r)}}class w extends u.B0{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return(0,u.S6)(this.inputs,((n,r)=>{const o=(0,u.je)(n[0]),[a,s]=this.transforms[r](u.is.arr(o)?o:n.map(u.je));e+=" "+a,t=t&&s})),t?"none":e}observerAdded(e){1==e&&(0,u.S6)(this.inputs,(e=>(0,u.S6)(e,(e=>(0,u.j$)(e)&&(0,u.UI)(e,this)))))}observerRemoved(e){0==e&&(0,u.S6)(this.inputs,(e=>(0,u.S6)(e,(e=>(0,u.j$)(e)&&(0,u.iL)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),(0,u.k0)(this,e)}}l.OH.assign({batchedUpdates:c.unstable_batchedUpdates,createStringInterpolator:u.qS,colors:u.O9});const S=(0,p.Ld)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:r,children:o,scrollTop:a,scrollLeft:s,...i}=t,l=Object.values(i),c=Object.keys(i).map((t=>n||e.hasAttribute(t)?t:f[t]||(f[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==o&&(e.textContent=o);for(let u in r)if(r.hasOwnProperty(u)){const t=m(u,r[u]);"float"===u?u="cssFloat":d.test(u)?e.style.setProperty(u,t):e.style[u]=t}c.forEach(((t,n)=>{e.setAttribute(t,l[n])})),void 0!==a&&(e.scrollTop=a),void 0!==s&&(e.scrollLeft=s)},createAnimatedStyle:e=>new k(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}).animated;function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const A=(0,r.s)("canvas",{height:80,width:"100%",cursor:"crosshair",display:"block",$draggable:""});const _=S((0,r.s)("div",{position:"relative",top:-2,backgroundColor:"$accent2",width:"100%",height:2,opacity:.2,borderRadius:1,transition:"opacity 350ms ease",transformOrigin:"left"}));function C(){const{displayValue:e,value:t,onUpdate:n,settings:o}=(0,r.u)(),i=(0,s.useRef)(e),c=(0,r.d)("colors","highlight3"),u=(0,r.d)("colors","elevation2"),p=(0,r.d)("colors","highlight1"),[d,m]=(0,s.useMemo)((()=>[a()(p).setAlpha(.4).toRgbString(),a()(p).setAlpha(.1).toRgbString()]),[p]),{tension:f,friction:h,mass:g=1}=e,{tension:b,friction:y}=o,[v,x]=(0,l.q_)((()=>({scaleX:.5,opacity:.2,immediate:e=>"opacity"===e}))),O=(0,r.e)((({movement:[e,r],memo:o=[f,h]})=>(n(R(R({},t),{},{tension:o[0]-Math.round(e)*b.step,friction:o[1]-Math.round(r/4)*y.step})),o))),k=(0,s.useMemo)((()=>(0,r.U)((()=>{const{tension:e,friction:t,mass:n}=i.current;x.start({from:{scaleX:0,opacity:.9},to:[{scaleX:.5},{opacity:.2}],config:{friction:t,tension:e,mass:n}})}),250)),[x]),w=(0,s.useCallback)(((e,t)=>{const{tension:n,friction:r,mass:o}=i.current,{width:a,height:s}=e,l=function(e,t,n=1){const r=Math.sqrt(e/n)/1e3,o=t/(2*Math.sqrt(e*n)),a=r*Math.sqrt(1-o*o),s=r*Math.sqrt(o*o-1);return o<1?e=>1-Math.exp(-o*r*e)*((o*r*1-0)/a*Math.sin(a*e)+1*Math.cos(a*e)):1===o?e=>1-Math.exp(-r*e)*(1+(1*r-0)*e):e=>1-Math.exp(-o*r*e)*((o*r*1-0)*Math.sinh(s*e)+1*s*Math.cosh(s*e))/s}(n,r,o),p=new Path2D;for(let i=0;i<a;i++){const e=l(8*i)*s/2;p.lineTo(i,s-e)}t.clearRect(0,0,a,s);const f=new Path2D(p);f.lineTo(a-1,s),f.lineTo(0,s);const h=t.createLinearGradient(0,s/2,0,s);h.addColorStop(0,d),h.addColorStop(1,m),t.fillStyle=h,t.fill(f),t.strokeStyle=u,t.lineJoin="round",t.lineWidth=14,t.stroke(p),t.strokeStyle=c,t.lineWidth=2,t.stroke(p)}),[c,u,d,m]),[S,j]=(0,r.G)(w);return(0,s.useEffect)((()=>{i.current={tension:f,friction:h,mass:g},w(S.current,j.current),k()}),[w,k,f,h,g,S,j]),s.createElement(s.Fragment,null,s.createElement(A,P({},O(),{ref:S})),s.createElement(_,{style:v}))}const{Row:I,Label:E,Vector:D}=i;function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const $={min:1,step:1},q={min:1,step:.5},T={min:.1,step:.1},N={tension:100,friction:30,mass:1},U=(0,r.ad)({normalize:(e={})=>{const t="value"in e?e:{value:e},{value:n}=t,o=L(t,["value"]),a={tension:R(R({},$),o.tension),friction:R(R({},q),o.friction),mass:R(R({},T),o.mass)},{value:s,settings:i}=(0,r.aj)(R(R({},N),n),a);return{value:s,settings:i}},sanitize:(e,t,n)=>(0,r.ah)(e,t,n),component:function(){const{label:e,displayValue:t,onUpdate:n,settings:o}=(0,r.u)();return s.createElement(s.Fragment,null,s.createElement(I,null,s.createElement(C,null)),s.createElement(I,{input:!0},s.createElement(E,null,e),s.createElement(D,{value:t,settings:o,onUpdate:n})))}})},34578:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return h},contentTitle:function(){return g},metadata:function(){return b},toc:function(){return y},Atom:function(){return v},from:function(){return x},to:function(){return O},default:function(){return w}});var r=n(7560),o=n(98283),a=n(56470),s=n(77162),i=n.n(s),l=(n(2784),n(30876)),c=n(18400),u=n(53059),p=n(43921),d=n(1581),m=n(1511),f=["components"],h={sidebar_position:3,sidebar_label:"Rings"},g=void 0,b={unversionedId:"animated/Rings",id:"animated/Rings",isDocsHomePage:!1,title:"Rings",description:"export const Atom = animated(_Atom);",source:"@site/examples/animated/Rings.mdx",sourceDirName:"animated",slug:"/animated/Rings",permalink:"/react-mol/examples/animated/Rings",version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,sidebar_label:"Rings"},sidebar:"defaultSidebar",previous:{title:"Pieces",permalink:"/react-mol/examples/animated/Pieces"},next:{title:"Books",permalink:"/react-mol/examples/cannon/Books"}},y=[],v=(0,d.animated)(m.hg),x={x:0},O=function(){var e=(0,a.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t({x:1});case 3:return e.next=5,t({x:0});case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k={toc:y,Atom:v};function w(e){var t=e.components,n=(0,o.Z)(e,f);return(0,l.kt)("wrapper",(0,r.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"import {animated, useSprings} from 'react-spring/three'\nimport {Instanced, Atom as _Atom} from 'react-mol/src'\n\nconst Atom = animated(_Atom);\n")),(0,l.kt)(c.B9,(0,r.Z)({Atom:v,Instanced:m.pY,useSprings:d.useSprings,from:x,to:O},(0,p.M4)({c:100,config:(0,u.S)({mass:2.2,tension:138,friction:79})}),{mdxType:"Demo"}),"function Rings () {\n  const {PI, exp, cos, sin, sqrt} = Math;\n  return (\n    <Canvas>\n      <Instanced>\n        <torusGeometry args={[10, .5, 5, 50]}/>\n        <meshPhysicalMaterial\n          roughness={0.2}\n          metalness={1.0}\n          color=\"darksalmon\"\n        />\n        <group\n          scale={Array(3).fill(1 / exp(c / 12))}\n          rotation={[PI / 2, 0, 0]}>\n          {useSprings(c, i =>\n            ({from, to, config, delay: 50 * i})\n          )[0].map(({x}, i) => (\n            <Atom\n              key={'0' + i}\n              scale={[exp(i/12), exp(i/12), 1]}\n              rotation-x={x.to(\n                [0, 0.1, 0.9, 1],\n                [0, -PI * 0.1, PI * 1.1, PI]\n              )}\n            />\n          ))}\n        </group>\n      </Instanced>\n    </Canvas>\n  )\n}\n"))}w.isMDXComponent=!0}}]);