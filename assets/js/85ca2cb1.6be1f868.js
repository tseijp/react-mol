(self.webpackChunk_react_mol_docs=self.webpackChunk_react_mol_docs||[]).push([[398],{53059:function(e,t,n){"use strict";n.d(t,{S:function(){return U}});var r=n(22114),o=n(98621),i=n.n(o),a=(n(7665),n(2784));n(66162);const s={Row:r.R,Label:r.L,Portal:r.P,Overlay:r.O,String:r.a6,Number:r.a7,Boolean:r.a8,Select:r.a9,Vector:r.a,InnerLabel:r.aa};var l=n(28308),c=n(28316),u=n(66799),p=n(91997);const d=/^--/;function m(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||d.test(e)||h.hasOwnProperty(e)&&h[e]?(""+t).trim():t+"px"}const f={};let h={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const g=["Webkit","Ms","Moz","O"];h=Object.keys(h).reduce(((e,t)=>(g.forEach((n=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(n,t)]=e[t])),e)),h);const b=/^(matrix|translate|scale|rotate|skew)/,y=/^(translate)/,v=/^(rotate|skew)/,x=(e,t)=>u.is.num(e)&&0!==e?e+t:e,O=(e,t)=>u.is.arr(e)?e.every((e=>O(e,t))):u.is.num(e)?e===t:parseFloat(e)===t;class w extends p.rS{constructor({x:e,y:t,z:n,...r}){const o=[],i=[];(e||t||n)&&(o.push([e||0,t||0,n||0]),i.push((e=>[`translate3d(${e.map((e=>x(e,"px"))).join(",")})`,O(e,0)]))),(0,u.rU)(r,((e,t)=>{if("transform"===t)o.push([e||""]),i.push((e=>[e,""===e]));else if(b.test(t)){if(delete r[t],u.is.und(e))return;const n=y.test(t)?"px":v.test(t)?"deg":"";o.push((0,u.qo)(e)),i.push("rotate3d"===t?([e,t,r,o])=>[`rotate3d(${e},${t},${r},${x(o,n)})`,O(o,0)]:e=>[`${t}(${e.map((e=>x(e,n))).join(",")})`,O(e,t.startsWith("scale")?1:0)])}})),o.length&&(r.transform=new k(o,i)),super(r)}}class k extends u.B0{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return(0,u.S6)(this.inputs,((n,r)=>{const o=(0,u.je)(n[0]),[i,a]=this.transforms[r](u.is.arr(o)?o:n.map(u.je));e+=" "+i,t=t&&a})),t?"none":e}observerAdded(e){1==e&&(0,u.S6)(this.inputs,(e=>(0,u.S6)(e,(e=>(0,u.j$)(e)&&(0,u.UI)(e,this)))))}observerRemoved(e){0==e&&(0,u.S6)(this.inputs,(e=>(0,u.S6)(e,(e=>(0,u.j$)(e)&&(0,u.iL)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),(0,u.k0)(this,e)}}l.OH.assign({batchedUpdates:c.unstable_batchedUpdates,createStringInterpolator:u.qS,colors:u.O9});const P=(0,p.Ld)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{style:r,children:o,scrollTop:i,scrollLeft:a,...s}=t,l=Object.values(s),c=Object.keys(s).map((t=>n||e.hasAttribute(t)?t:f[t]||(f[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==o&&(e.textContent=o);for(let u in r)if(r.hasOwnProperty(u)){const t=m(u,r[u]);"float"===u?u="cssFloat":d.test(u)?e.style.setProperty(u,t):e.style[u]=t}c.forEach(((t,n)=>{e.setAttribute(t,l[n])})),void 0!==i&&(e.scrollTop=i),void 0!==a&&(e.scrollLeft=a)},createAnimatedStyle:e=>new w(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}).animated;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const C=(0,r.s)("canvas",{height:80,width:"100%",cursor:"crosshair",display:"block",$draggable:""});const R=P((0,r.s)("div",{position:"relative",top:-2,backgroundColor:"$accent2",width:"100%",height:2,opacity:.2,borderRadius:1,transition:"opacity 350ms ease",transformOrigin:"left"}));function _(){const{displayValue:e,value:t,onUpdate:n,settings:o}=(0,r.u)(),s=(0,a.useRef)(e),c=(0,r.d)("colors","highlight3"),u=(0,r.d)("colors","elevation2"),p=(0,r.d)("colors","highlight1"),[d,m]=(0,a.useMemo)((()=>[i()(p).setAlpha(.4).toRgbString(),i()(p).setAlpha(.1).toRgbString()]),[p]),{tension:f,friction:h,mass:g=1}=e,{tension:b,friction:y}=o,[v,x]=(0,l.q_)((()=>({scaleX:.5,opacity:.2,immediate:e=>"opacity"===e}))),O=(0,r.e)((({movement:[e,r],memo:o=[f,h]})=>(n(E(E({},t),{},{tension:o[0]-Math.round(e)*b.step,friction:o[1]-Math.round(r/4)*y.step})),o))),w=(0,a.useMemo)((()=>(0,r.U)((()=>{const{tension:e,friction:t,mass:n}=s.current;x.start({from:{scaleX:0,opacity:.9},to:[{scaleX:.5},{opacity:.2}],config:{friction:t,tension:e,mass:n}})}),250)),[x]),k=(0,a.useCallback)(((e,t)=>{const{tension:n,friction:r,mass:o}=s.current,{width:i,height:a}=e,l=function(e,t,n=1){const r=Math.sqrt(e/n)/1e3,o=t/(2*Math.sqrt(e*n)),i=r*Math.sqrt(1-o*o),a=r*Math.sqrt(o*o-1);return o<1?e=>1-Math.exp(-o*r*e)*((o*r*1-0)/i*Math.sin(i*e)+1*Math.cos(i*e)):1===o?e=>1-Math.exp(-r*e)*(1+(1*r-0)*e):e=>1-Math.exp(-o*r*e)*((o*r*1-0)*Math.sinh(a*e)+1*a*Math.cosh(a*e))/a}(n,r,o),p=new Path2D;for(let s=0;s<i;s++){const e=l(8*s)*a/2;p.lineTo(s,a-e)}t.clearRect(0,0,i,a);const f=new Path2D(p);f.lineTo(i-1,a),f.lineTo(0,a);const h=t.createLinearGradient(0,a/2,0,a);h.addColorStop(0,d),h.addColorStop(1,m),t.fillStyle=h,t.fill(f),t.strokeStyle=u,t.lineJoin="round",t.lineWidth=14,t.stroke(p),t.strokeStyle=c,t.lineWidth=2,t.stroke(p)}),[c,u,d,m]),[P,j]=(0,r.G)(k);return(0,a.useEffect)((()=>{s.current={tension:f,friction:h,mass:g},k(P.current,j.current),w()}),[k,w,f,h,g,P,j]),a.createElement(a.Fragment,null,a.createElement(C,S({},O(),{ref:P})),a.createElement(R,{style:v}))}const{Row:I,Label:A,Vector:q}=s;function T(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}const D={min:1,step:1},L={min:1,step:.5},$={min:.1,step:.1},z={tension:100,friction:30,mass:1},U=(0,r.ad)({normalize:(e={})=>{const t="value"in e?e:{value:e},{value:n}=t,o=T(t,["value"]),i={tension:E(E({},D),o.tension),friction:E(E({},L),o.friction),mass:E(E({},$),o.mass)},{value:a,settings:s}=(0,r.aj)(E(E({},z),n),i);return{value:a,settings:s}},sanitize:(e,t,n)=>(0,r.ah)(e,t,n),component:function(){const{label:e,displayValue:t,onUpdate:n,settings:o}=(0,r.u)();return a.createElement(a.Fragment,null,a.createElement(I,null,a.createElement(_,null)),a.createElement(I,{input:!0},a.createElement(A,null,e),a.createElement(q,{value:t,settings:o,onUpdate:n})))}})},92104:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return b},contentTitle:function(){return y},metadata:function(){return v},toc:function(){return x},Atom:function(){return O},PI:function(){return w},exp:function(){return k},cos:function(){return P},sin:function(){return S},sqrt:function(){return j},from:function(){return M},to:function(){return E},default:function(){return R}});var r=n(7560),o=n(98283),i=n(56470),a=n(77162),s=n.n(a),l=(n(2784),n(30876)),c=n(18400),u=n(12955),p=n(43921),d=n(53059),m=n(1581),f=n(1511),h=n(72856),g=["components"],b={sidebar_position:2,sidebar_label:"Pieces"},y=void 0,v={unversionedId:"animated/Pieces",id:"animated/Pieces",isDocsHomePage:!1,title:"Pieces",description:"export const Atom = animated(_Atom);",source:"@site/examples/animated/Pieces.mdx",sourceDirName:"animated",slug:"/animated/Pieces",permalink:"/react-mol/examples/animated/Pieces",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,sidebar_label:"Pieces"},sidebar:"defaultSidebar",previous:{title:"Bounds",permalink:"/react-mol/examples/animated/Bounds"},next:{title:"Rings",permalink:"/react-mol/examples/animated/Rings"}},x=[],O=(0,m.animated)(f.hg),w=Math.PI,k=Math.exp,P=Math.cos,S=Math.sin,j=Math.sqrt,M={x:0},E=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,t({x:1});case 3:return e.next=5,t({x:0});case 5:e.next=0;break;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C={toc:x,Atom:O};function R(e){var t=e.components,n=(0,o.Z)(e,g);return(0,l.kt)("wrapper",(0,r.Z)({},C,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)(c.B9,(0,r.Z)({THREE:u,Instanced:f.pY,useSprings:m.useSprings,Atom:O,from:M,to:E,PI:w,exp:k,cos:P,sin:S,sqrt:j,range:h.w},(0,p.M4)({l:{value:24,min:1,max:50},r:{value:2.5,min:0,max:5},config:(0,d.S)({mass:10,tension:700,friction:30})}),{mdxType:"Demo"}),"function Pieces () {\n  const line = React.useMemo(() => {\n      const v1 = new THREE.Vector3(0, 0, -r)\n      const v2 = new THREE.Vector3(0, 0,  r)\n      return new THREE.LineCurve3(v1, v2)\n  }, [r])\n  const counts = React.useMemo(() =>\n      range(2 * l)\n          .map(i => i - l)\n          .map(i => ~~sqrt(l**2 - i**2))\n  , [l])\n  return (\n    <Canvas>\n      <Instanced>\n        <tubeGeometry args={[\n          line, 20, r / l / 2, 12, false\n        ]}/>\n        <meshPhysicalMaterial\n          roughness={0.2}\n          metalness={1.0}\n          color=\"darksalmon\"\n        />\n        <group rotation-z={PI}>\n          {useSprings(2 * l, i => ({from, to, config, delay: 250*i/l}))[0]\n          .map(({x}, i) =>\n            range(counts[i]).map(j =>\n              <Atom\n                key={j+'-'+i}\n                scale-z={sqrt(1 - ((i - l)**2 + j**2) / l**2)}\n                position-x={(i - l) * r / l}\n                position-y={j * r / l}\n                rotation-x={x.to(v => v * PI / 2 * (i - l) / l)}\n              />\n            )\n          )}\n        </group>\n      </Instanced>\n    </Canvas>\n  )\n}\n"))}R.isMDXComponent=!0},72856:function(e,t,n){"use strict";function r(e){void 0===e&&(e=0);for(var t=new Array(e);e--;)t[e]=e;return t}n.d(t,{w:function(){return r}})}}]);